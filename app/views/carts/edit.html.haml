%main.container.general-main-wrap
  %h1.general-title-margin= t('.title')

  = simple_form_for current_order, url: cart_update_path do |field|

    .visible-xs
      = field.simple_fields_for :order_items do |item_field|
        = render partial: 'order_items/order_item',
          locals: { order_item: item_field.object, field: item_field }

    .hidden-xs
      = render partial: 'order_items/table', locals: { field: field }

    .general-order-wrap
      .row
        .col-sm-4
          .input-group.general-input-group
            = field.simple_fields_for :coupon, @coupon_form do |coupon|
              = coupon.input :code
          .mb-30
            = field.submit t('.update_cart'), class: 'btn btn-primary mb-15 res-block'

        .col-sm-8
          .res-mr-200.text-center.general-text-right
            %p.in-gold-500.font-18= t('.order_summary')
            %table.general-summary-table.general-summary-table-right.general-text-right
              %tr
                %td
                  %p.font-16= "#{t('.sub_total')}:"
                %td
                  %p.font-16= currency_price(current_order.sub_total)
              %tr
                %td
                  %p.font-16= current_order.decorate.discount_title
                %td
                  %p.font-16= currency_price(current_order.coupon_cost)
              %tr
                %td
                  %strong.font-18= "#{t('.order_total')}:"
                %td
                  %strong.font-18= currency_price(current_order.calc_total_cost(:coupon))

            = link_to t('.checkout'), checkouts_path(:address),
              class: 'button btn btn-default mb-20 visible-xs-inline-block'

    .hidden-xs.center-block.general-text-align
      = link_to t('.checkout'), checkout_path(:address),
        class: 'button btn btn-default mb-20'
